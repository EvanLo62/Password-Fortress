{% extends "base.html" %}
{% block title %}儀表板{% endblock %}

{% block content %}
<style>
.dashboard-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin-bottom: 50px;
    margin-top: 20px;
}

.gauge-container {
    position: relative;
    width: 200px;
    height: 100px;
    margin-bottom: 20px;
}

.gauge-bg {
    fill: none;
    stroke: #ddd;
    stroke-width: 15;
}

.gauge-arc {
    fill: none;
    stroke-width: 15;
    stroke: url(#gradColor);
    stroke-linecap: round;
}

.gauge-needle {
    stroke: #333;
    stroke-width: 2;
}

.gauge-value {
    margin-top: 10px;
    font-size: 1.2rem;
    font-weight: bold;
    color: #333;
}

.password-count {
    font-size: 1rem;
    color: #555;
    margin-bottom: 40px;
}

.features {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
}

.feature {
    background-color: #fff;
    width: 200px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    border-radius: 10px;
    transition: box-shadow 0.3s;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.feature:hover {
    box-shadow: 0 6px 10px rgba(0,0,0,0.2);
}

.feature img {
    width: 50px;
    height: 50px;
    margin-bottom: 10px;
}

.feature-title {
    font-size: 1.1rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 8px;
}

.feature-desc {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 15px;
}

.feature a {
    text-decoration: none;
    color: #007bff;
    font-weight: bold;
}
.feature a:hover {
    text-decoration: underline;
}
</style>

<div class="dashboard-container">
    <div class="gauge-container">
        <svg viewBox="0 0 100 50" width="100%" height="100%">
            <defs>
                <linearGradient id="gradColor" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="red"/>
                    <stop offset="50%" stop-color="yellow"/>
                    <stop offset="100%" stop-color="green"/>
                </linearGradient>
            </defs>
            <path d="M 10,50 A 40,40 0 0 1 90,50" class="gauge-bg" />
            <path d="M 10,50 A 40,40 0 0 1 90,50" class="gauge-arc" />
            <!-- 調整transform順序，以減少Lint誤判 -->
            <line x1="50" y1="50" x2="50" y2="15" class="gauge-needle"
                style="
                    transform-origin: 50% 100%;
                    transform: rotate({{ ((avg_strength * 180 / 100)|int) }}deg);
                ">
            </line>
        </svg>
    </div>
    <div class="gauge-value">
        平均密碼強度：{{ avg_strength }}
    </div>
    <div class="password-count">
        您目前共有 {{ total_entries }} 筆密碼
    </div>

    <div class="features">
        <div class="feature">
            <img src="{{ url_for('static', filename='images/dashboard_icon.png') }}" alt="Dashboard Icon">
            <div class="feature-title">前往密碼管理</div>
            <div class="feature-desc">管理您的密碼條目，新增、編輯、刪除輕鬆搞定</div>
            <a href="{{ url_for('password_manager.view_passwords') }}">前往</a>
        </div>

        <div class="feature">
            <img src="{{ url_for('static', filename='images/strength_icon.png') }}" alt="Strength Icon">
            <div class="feature-title">密碼強度測試</div>
            <div class="feature-desc">立即檢測密碼強度，獲取安全建議</div>
            <a href="{{ url_for('password_strength_checker.checker') }}">前往</a>
        </div>

        <div class="feature">
            <img src="{{ url_for('static', filename='images/generator_icon.png') }}" alt="Generator Icon">
            <div class="feature-title">密碼生成器</div>
            <div class="feature-desc">快速產生強密碼，提高帳號安全性</div>
            <a href="{{ url_for('password_generator.generator') }}">前往</a>
        </div>

        <div class="feature">
            <img src="{{ url_for('static', filename='images/encryptor_icon.png') }}" alt="Encryptor Icon">
            <div class="feature-title">密碼加密器</div>
            <div class="feature-desc">利用提示詞產生記憶性高的加密密碼</div>
            <a href="{{ url_for('password_encryptor.encryptor') }}">前往</a>
        </div>
    </div>
</div>
{% endblock %}
